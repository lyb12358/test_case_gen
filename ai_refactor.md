# AI功能重构需求
1. 重新审视AI生成功能，我目前只需要test_points_only和test_cases_only，不需要both_stages
2. 前端的批量生成时我看有数量之类的参数，当前后端应该不支持，也不需要那么多参数，每次只需要提供一个非必填的额外上下文输入框给用户输入额外信息即可，所有提示词都由业务管理中配置的提示词组合来提供，要审视当前的提示词组合功能，能否正确拆分系统提示词和用户提示词给大模型
3. 审视变量模板功能，前端后端都看，统计当前可用的变量模板，变量模板中，核心功能是对**参考测试点**和**参考测试用例**的利用。所有提示词都能配置变量，但是在提示词组合中每种变量只会生效一次，提供提示词预览的功能时，变量不需要预览替换成真实内容。这两个变量在最终替换时，真实内容将按照接口中的参数来提取，举例：按照生成的阶段和id数组，来提取测试点或者测试用例json数组。
4. 举例：当添加参考测试点变量时，预期是要求大模型在生成测试点数据或者测试用例数据时，要参考这些提供的测试点数据。但是根据生成功能的不同，要额外添加其他内容。在测试点生成时，如果进行参考测试点变量的替换，要在开头加一句：目前已有这些测试点，不要跟这些测试点内容重复。在测试用例生成时，如果进行参考测试点变量的替换，要在开头加一句：按照如下的测试点数据扩充内容，生成用例，务必一一对应。
5. 举例：当添加参考测试用例变量时，预期是在生成测试用例数据时，要参考这些提供的测试用例数据，而且只在测试用例生成阶段才有效，测试点生成阶段将忽略参考测试用例变量。在测试用例生成时，如果进行参考测试用例变量的替换，要在开头加一句：目前已有这些测试用例，不要跟这些测试用例内容重复。
6. 审视当前配置的提示词组合中的通用测试点生成系统提示词(id:87)和通用测试用例生成系统提示词(id:51),看看测试点和测试用例输出的json结构是否合适，推荐一下合适的结构，首先我确认大模型能严格按照指定的json结构输出，所以不需要有复杂的json格式检查，但是要让大模型生成的结构包含关键内容，最好要尽量简单，让返回结果的解析健壮有效
7. 批量生成页面外，预期只会在以下场合添加AI生成功能：根据业务类型生成测试点；根据业务类型生成测试用例（只要在有对应测试点数据时才会这么做）；根据测试点生成对应测试用例。